<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Galactic Explorers | Guilds</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.cdnfonts.com/css/sansita-one-3"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/guilds.css" />
    <link rel="stylesheet" href="css/navbar.css" />
    <link rel="stylesheet" href="css/toast.css" />

    <!-- Favicon -->
    <link rel="icon" href="assets/img/favicon.png" type="image/x-icon" />

    <!-- JS Components -->
    <script src="components/navBar.js" defer></script>
    <script src="components/footer.js" defer></script>
    <script src="components/loadingScreen.js" defer></script>
  </head>
  <body>
    <!-- Navbar -->
    <nav-bar></nav-bar>

    <!-- Welcome Strip -->
    <section class="quote-strip text-center py-2">
      <em>Unite. Explore. Conquer. Welcome to the Galactic Guilds!</em>
    </section>

    <!-- Hero Section -->
    <section id="guilds" class="hero py-5">
      <div class="jumbotron text-center py-5">
        <h1 class="display-6 text-center mt-5">
          <strong>Welcome to Galactic Guilds!</strong>
        </h1>
        <div class="container mt-3">
          <p class="lead">
            Unite. Explore. Conquer. Form alliances and achieve greatness
            together! ğŸŒŒ
          </p>
        </div>
        <p class="lead">
          <a
            class="btn btn-lg text-white"
            id="main-btn"
            href="#guild-leaderboard-section"
            role="button"
            >View Guilds âš”ï¸</a
          >
        </p>
      </div>
    </section>

<!-- Guild Leaderboard Section -->
<section id="guild-leaderboard-section" class="container py-5">
  <h2 class="fw-bold text-center text-warning mb-3">ğŸ† Guild Leaderboard</h2>
  <p class="text-center text-white mb-4">
    The top guilds ranked by total planets explored! ğŸš€ğŸŒ
  </p>

  <div class="table-responsive">
    <table class="table table-dark table-hover text-center align-middle rounded shadow-lg">
      <thead class="bg-primary text-white">
        <tr>
          <th scope="col">ğŸ… Rank</th>
          <th scope="col">ğŸ›¡ï¸ Guild Name</th>
          <th scope="col">ğŸŒ Planets Explored</th>
          <th scope="col">ğŸ‘‘ Guild Leader</th>
        </tr>
      </thead>
      <tbody id="leaderboard-container">
        <!-- Leaderboard Data Will Be Populated Here -->
      </tbody>
    </table>
  </div>
</section>

    <!-- Guild Creation Section -->
    <section id="create-guild-section" class="container py-5 mt-5">
      <h2 class="fw-bold text-center mb-4 text-white">Create a Guild</h2>
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="card shadow-sm border-0">
            <div class="card-body">
              <form id="create-guild-form" class="row g-4">
                <!-- Guild Name -->
                <div class="col-12">
                  <label for="guildName" class="form-label fw-bold text-black"
                    >Guild Name</label
                  >
                  <input
                    type="text"
                    class="form-control shadow-sm text-black"
                    id="guildName"
                    placeholder="Enter your new guild's name!"
                    required
                  />
                </div>

                <!-- Guild Description -->
                <div class="col-12">
                  <label
                    for="guildDescription"
                    class="form-label fw-bold text-black"
                    >Guild Description</label
                  >
                  <textarea
                    class="form-control shadow-sm text-black"
                    id="guildDescription"
                    placeholder="Enter a brief description of your guild"
                    rows="3"
                    required
                  ></textarea>
                </div>

                <!-- Submit Button -->
                <div class="col-12 text-center">
                  <button
                    type="submit"
                    class="btn btn-primary px-5 py-2 fw-bold rounded-pill shadow-sm"
                  >
                    <i class="bi bi-plus-circle me-2"></i>Create Guild
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Loading Screen -->
    <loading-screen id="loading-screen"></loading-screen>

  <!-- Guilds Section -->
  <section id="guilds-section" class="container-fluid py-5 mt-5 mb-5">
    <h2 class="fw-bold text-center text-white mb-3">Available Guilds</h2>
    <p class="text-center text-white mb-5">Explore the world of guilds! Click '<strong class="text-warning">Guild Details</strong>' to uncover exciting insights and choose the perfect guild for your journey!</p>
    <hr class="my-4 border border-2 border-dark" />
    <div id="guilds-container" class="row row-cols-1 row-cols-md-3 g-4 mx-auto" style="max-width: 90%;">
      <!-- Guild cards will be dynamically generated here -->
    </div>
  </section>


<!-- Guild Details Modal -->
<div
  class="modal fade"
  id="guildDetailsModal"
  tabindex="-1"
  aria-labelledby="guildDetailsModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title fw-bold" id="guildDetailsModalLabel">
          Guild Details
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <h5 id="guild-name" class="fw-bold"></h5>
        <p id="guild-description" class="text-muted"></p>
        <ul id="guild-members" class="list-group">
          <!-- Guild members preview will go here -->
        </ul>
      </div>
      <div class="modal-footer">
        <!-- View Members Button -->
        <button
          type="button"
          class="btn btn-secondary"
          id="viewMembersButton"
          data-bs-toggle="modal"
          data-bs-target="#guildMembersModal"
        >
          View Members
        </button>
        <!-- Join Guild Button -->
        <button
          type="button"
          class="btn btn-primary"
          id="joinGuildButton"
        >
          Join Guild
        </button>
        <!-- Leave Guild Button -->
        <button
          type="button"
          class="btn btn-danger d-none"
          id="leaveGuildButton"
        >
          Leave Guild
        </button>
      </div>
    </div>
  </div>
</div>


<!-- Guild Members Modal -->
<div
  class="modal fade"
  id="guildMembersModal"
  tabindex="-1"
  aria-labelledby="guildMembersModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title fw-bold" id="guildMembersModalLabel">
          Guild Members
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <ul id="guildMembersList" class="list-group">
          <!-- Guild members will be dynamically inserted here -->
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Delete Guild Modal -->
<div
  class="modal fade"
  id="deleteGuildModal"
  tabindex="-1"
  aria-labelledby="deleteGuildModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title fw-bold" id="deleteGuildModalLabel">Confirm Guild Deletion</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body text-center">
        Are you sure you want to delete your guild <br><strong id="guildToDeleteName"></strong>?<br> This action <strong>cannot be undone</strong>.
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-danger"
          id="deleteGuildButton"
        >
          Delete Now
        </button>
        <button
          type="button"
          class="btn btn-secondary"
          data-bs-dismiss="modal"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>



    <!-- Toast Container -->
    <div id="toast-container" class="position-fixed bottom-0 end-0 p-3"></div>

    <!-- Footer -->
    <app-footer></app-footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Guilds JS -->
    <script src="js/queryCmds.js" type="text/javascript"></script>
    <script src="js/getCurrentURL.js" type="text/javascript"></script>
    <script src="js/loadGuilds.js" type="text/javascript"></script>
    <script src="js/handleGuildActions.js" type="text/javascript"></script>
    <script src="js/handleGuildCreation.js" type="text/javascript"></script>
    <script src="js/loadGuildsLeaderboard.js" type="text/javascript"></script>
    <script src="js/createToast.js" type="text/javascript"></script>
    <script src="js/getUserIdFromToken.js" type="text/javascript"></script>
    <script src="js/userNavbarToggle.js" defer></script>
    <script src="js/refreshToken.js" type="text/javascript"></script>
  </body>
</html>
